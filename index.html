from flask import Flask, jsonify
from flask_cors import CORS
import random

app = Flask(__name__)
CORS(app)  # Enable CORS so your index.html can fetch data

# --- Simulated sensor data ---
def get_sensor_data():
    return {
        # "temperature": round(random.uniform(24.0, 35.0), 1),
        # "humidity": round(random.uniform(40.0, 85.0), 1)

        # Manual fixed values for testing
        "temperature": 43.0, 
        "humidity": 55.0,
    }

# --- API Endpoints ---
@app.route("/temperature")
def temperature():
    data = get_sensor_data()
    return jsonify({"temperature": data["temperature"]})

@app.route("/humidity")
def humidity():
    data = get_sensor_data()
    return jsonify({"humidity": data["humidity"]})

@app.route("/nn_risk")
def nn_risk():
    # Dummy Neural Network risk value 0-1
    value = round(random.uniform(0, 1), 2)
    return jsonify({"nn_risk": value})

# --- Run server ---
if __name__ == "__main__":
    app.run(host="127.0.0.1", port=5000, debug=True)
